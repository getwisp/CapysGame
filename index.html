<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Capys Game - Build a Thriving Capybara Community</title>
    <link rel="stylesheet" href="css/themes.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/animations.css">
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Fredoka+One&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Loading Screen -->
    <div id="loading-screen">
        <div class="loading-content">
            <div class="loading-icon">
                <img src="assets/sprites/capybara-soaking.svg" alt="Capybara" class="loading-capybara">
            </div>
            <h1>Capys Game</h1>
            <p>Building your capybara paradise...</p>
            <div class="loading-bar">
                <div class="loading-fill"></div>
            </div>
        </div>
    </div>

    <div id="game-container">
        <!-- Header -->
        <header id="game-header">
            <h1 class="game-title">Capys Game</h1>
            <div class="header-info">
                <span id="season-display" class="season spring">
                    <span class="season-icon">üå∏</span>
                    <span class="season-name">Spring</span>
                </span>
                <span id="day-display">Day <span id="day-count">1</span></span>
                <span id="weather-display" class="weather sunny">‚òÄÔ∏è</span>
                <span id="time-display" class="time day">
                    <span class="time-icon">üå§Ô∏è</span>
                </span>
            </div>
        </header>

        <!-- Main Game Area -->
        <main id="game-main">
            <!-- Left Panel - Resources -->
            <aside id="resources-panel">
                <h2>Resources</h2>
                <div id="resources-list">
                    <!-- Primary Resources -->
                    <div class="resource-group">
                        <div class="resource" id="res-grass">
                            <span class="res-icon">üåø</span>
                            <span class="res-name">Grass</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 100</span>
                            <span class="res-rate positive">+0/s</span>
                        </div>
                        <div class="resource" id="res-reeds">
                            <span class="res-icon">üåæ</span>
                            <span class="res-name">Reeds</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 50</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                        <div class="resource hidden" id="res-clay">
                            <span class="res-icon">üè∫</span>
                            <span class="res-name">Clay</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 50</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                        <div class="resource hidden" id="res-wood">
                            <span class="res-icon">ü™µ</span>
                            <span class="res-name">Wood</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 50</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                        <div class="resource hidden" id="res-fish">
                            <span class="res-icon">üêü</span>
                            <span class="res-name">Fish</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 25</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                        <div class="resource hidden" id="res-stone">
                            <span class="res-icon">ü™®</span>
                            <span class="res-name">Stone</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 50</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                    </div>
                    
                    <!-- Crafted Resources -->
                    <div class="resource-group crafted hidden" id="crafted-resources">
                        <h3>Crafted</h3>
                        <div class="resource hidden" id="res-mats">
                            <span class="res-icon">üß∂</span>
                            <span class="res-name">Woven Mats</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 20</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                        <div class="resource hidden" id="res-pottery">
                            <span class="res-icon">ü´ñ</span>
                            <span class="res-name">Pottery</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 20</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                        <div class="resource hidden" id="res-herbs">
                            <span class="res-icon">üåø</span>
                            <span class="res-name">Herbal Mix</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 10</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                    </div>

                    <!-- Special Resources -->
                    <div class="resource-group special">
                        <div class="resource warmth-resource" id="res-warmth">
                            <span class="res-icon">‚ô®Ô∏è</span>
                            <span class="res-name">Warmth</span>
                            <div class="warmth-bar">
                                <div class="warmth-fill" style="width: 50%"></div>
                            </div>
                            <span class="warmth-percent">50%</span>
                        </div>
                        <div class="resource" id="res-happiness">
                            <span class="res-icon">üòä</span>
                            <span class="res-name">Happiness</span>
                            <span class="res-amount">50</span>
                            <span class="res-max">/ 100</span>
                        </div>
                        <div class="resource hidden" id="res-science">
                            <span class="res-icon">üìö</span>
                            <span class="res-name">Science</span>
                            <span class="res-amount">0</span>
                            <span class="res-max">/ 100</span>
                            <span class="res-rate">+0/s</span>
                        </div>
                    </div>
                </div>

                <!-- Manual Actions -->
                <div id="manual-actions">
                    <h3>Actions</h3>
                    <button class="action-btn" id="btn-gather-grass" title="Click to gather grass">
                        üåø Gather Grass
                    </button>
                    <button class="action-btn" id="btn-gather-reeds" title="Click to gather reeds">
                        üåæ Gather Reeds
                    </button>
                </div>
            </aside>

            <!-- Center - Game View -->
            <section id="game-view">
                <div id="settlement-view">
                    <!-- Animated background layers -->
                    <div class="bg-layer sky"></div>
                    <div class="bg-layer clouds"></div>
                    <div class="bg-layer mountains"></div>
                    <div class="bg-layer trees"></div>
                    <div class="bg-layer water">
                        <div class="water-shimmer"></div>
                        <div class="water-shimmer shimmer-2"></div>
                        <div class="water-ripple-container">
                            <div class="water-ripple ripple-1"></div>
                            <div class="water-ripple ripple-2"></div>
                            <div class="water-ripple ripple-3"></div>
                        </div>
                    </div>
                    <div class="bg-layer ground"></div>

                    <!-- Hot Springs Area -->
                    <div id="hot-springs-area">
                        <!-- Hot springs will be rendered here -->
                    </div>

                    <!-- Buildings Area -->
                    <div id="buildings-area">
                        <!-- Buildings will be rendered here -->
                    </div>

                    <!-- Capybaras -->
                    <div id="capybaras-area">
                        <!-- Animated capybaras -->
                    </div>

                    <!-- Visitors -->
                    <div id="visitors-area">
                        <!-- Visitor animals -->
                    </div>

                    <!-- Floating notifications -->
                    <div id="float-notifications"></div>
                </div>

                <!-- Message Log -->
                <div id="message-log">
                    <div class="message welcome">Welcome to Capys Game! Your capybara adventure begins...</div>
                </div>
            </section>

            <!-- Right Panel - Details/Tabs -->
            <aside id="details-panel">
                <!-- Tab Navigation -->
                <nav id="tab-nav">
                    <button class="tab-btn active" data-tab="population">
                        <span class="tab-icon">üêπ</span>
                        <span class="tab-label">Capybaras</span>
                    </button>
                    <button class="tab-btn" data-tab="build">
                        <span class="tab-icon">üè†</span>
                        <span class="tab-label">Build</span>
                    </button>
                    <button class="tab-btn" data-tab="springs">
                        <span class="tab-icon">‚ô®Ô∏è</span>
                        <span class="tab-label">Springs</span>
                    </button>
                    <button class="tab-btn" data-tab="research">
                        <span class="tab-icon">üìö</span>
                        <span class="tab-label">Research</span>
                    </button>
                    <button class="tab-btn" data-tab="visitors">
                        <span class="tab-icon">ü¶Ü</span>
                        <span class="tab-label">Visitors</span>
                    </button>
                </nav>

                <!-- Tab Content -->
                <div id="tab-content">
                    <!-- Population Tab -->
                    <div class="tab-panel active" id="panel-population">
                        <div class="panel-header">
                            <h2>Capybara Colony</h2>
                            <div class="population-summary">
                                <span class="pop-count">
                                    <span id="pop-current">2</span> / <span id="pop-max">4</span>
                                </span>
                                <span class="pop-label">capybaras</span>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Population Stats</h3>
                            <div class="stat-row">
                                <span>Adults:</span>
                                <span id="stat-adults">2</span>
                            </div>
                            <div class="stat-row">
                                <span>Pups:</span>
                                <span id="stat-pups">0</span>
                            </div>
                            <div class="stat-row">
                                <span>Idle:</span>
                                <span id="stat-idle">2</span>
                            </div>
                            <div class="stat-row">
                                <span>Growth Progress:</span>
                                <div class="progress-bar small">
                                    <div class="progress-fill" id="growth-progress" style="width: 0%"></div>
                                </div>
                            </div>
                        </div>

                        <div class="panel-section" id="jobs-section">
                            <h3>Jobs</h3>
                            <div id="jobs-list">
                                <!-- Jobs will be populated here -->
                            </div>
                        </div>

                        <div class="panel-section" id="happiness-breakdown">
                            <h3>Happiness Factors</h3>
                            <div id="happiness-factors">
                                <!-- Happiness factors listed here -->
                            </div>
                        </div>
                    </div>

                    <!-- Build Tab -->
                    <div class="tab-panel" id="panel-build">
                        <div class="panel-header">
                            <h2>Construction</h2>
                        </div>

                        <div class="build-categories">
                            <button class="build-cat-btn active" data-category="all">All</button>
                            <button class="build-cat-btn" data-category="storage">Storage</button>
                            <button class="build-cat-btn" data-category="housing">Housing</button>
                            <button class="build-cat-btn" data-category="production">Production</button>
                        </div>

                        <div id="buildings-list">
                            <!-- Buildings will be populated here -->
                        </div>
                    </div>

                    <!-- Springs Tab -->
                    <div class="tab-panel" id="panel-springs">
                        <div class="panel-header">
                            <h2>Hot Springs</h2>
                        </div>

                        <div class="panel-section">
                            <h3>Warmth Status</h3>
                            <div class="warmth-display large">
                                <div class="warmth-bar large">
                                    <div class="warmth-fill" id="warmth-bar-large" style="width: 50%"></div>
                                </div>
                                <div class="warmth-stats">
                                    <span>Generation: <span id="warmth-gen">+0</span>/tick</span>
                                    <span>Consumption: <span id="warmth-cons">-0</span>/tick</span>
                                </div>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Active Springs</h3>
                            <div id="springs-list">
                                <p class="empty-message">No hot springs discovered yet...</p>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Soaking Capybaras</h3>
                            <div id="soaking-list">
                                <p class="empty-message">No one is soaking right now</p>
                            </div>
                        </div>
                    </div>

                    <!-- Research Tab -->
                    <div class="tab-panel" id="panel-research">
                        <div class="panel-header">
                            <h2>Research</h2>
                        </div>

                        <div class="panel-section locked" id="research-locked">
                            <p>Build a <strong>Council Circle</strong> to unlock research!</p>
                        </div>

                        <div class="panel-section hidden" id="research-unlocked">
                            <div class="research-branches">
                                <button class="research-branch-btn active" data-branch="survival">Survival</button>
                                <button class="research-branch-btn" data-branch="construction">Construction</button>
                                <button class="research-branch-btn" data-branch="springs">Hot Springs</button>
                                <button class="research-branch-btn" data-branch="social">Social</button>
                            </div>
                            <div id="research-tree">
                                <!-- Research tree will be populated here -->
                            </div>
                        </div>
                    </div>

                    <!-- Visitors Tab -->
                    <div class="tab-panel" id="panel-visitors">
                        <div class="panel-header">
                            <h2>Animal Friends</h2>
                        </div>

                        <div class="panel-section">
                            <h3>Current Visitors</h3>
                            <div id="current-visitors">
                                <p class="empty-message">No visitors yet. Build more to attract friends!</p>
                            </div>
                        </div>

                        <div class="panel-section">
                            <h3>Visitor History</h3>
                            <div id="visitor-history">
                                <!-- Visited species -->
                            </div>
                        </div>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Footer / Status Bar -->
        <footer id="game-footer">
            <div class="footer-left">
                <span id="productivity-display">
                    Productivity: <span id="productivity-value">100%</span>
                </span>
                <span id="legacy-display" class="hidden">
                    Legacy Points: <span id="legacy-value">0</span>
                </span>
            </div>
            <div class="footer-center">
                <span id="status-message">Your capybaras are settling in...</span>
            </div>
            <div class="footer-right">
                <button class="footer-btn" id="btn-save" title="Save Game">üíæ</button>
                <button class="footer-btn" id="btn-settings" title="Settings">‚öôÔ∏è</button>
                <button class="footer-btn hidden" id="btn-migrate" title="The Great Migration">üåç</button>
            </div>
        </footer>

        <!-- Settings Modal -->
        <div id="settings-modal" class="modal hidden">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Settings</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="setting-group">
                        <h3>Save/Load</h3>
                        <button class="btn" id="btn-manual-save">Save Game</button>
                        <button class="btn" id="btn-export">Export Save</button>
                        <button class="btn" id="btn-import">Import Save</button>
                        <button class="btn danger" id="btn-reset">Reset Game</button>
                    </div>
                    <div class="setting-group">
                        <h3>Display</h3>
                        <label class="setting-row">
                            <span>Show animations</span>
                            <input type="checkbox" id="setting-animations" checked>
                        </label>
                        <label class="setting-row">
                            <span>Show floating numbers</span>
                            <input type="checkbox" id="setting-floats" checked>
                        </label>
                    </div>
                    <div class="setting-group">
                        <h3>About</h3>
                        <p>Capys Game v1.0</p>
                        <p><em>"Build a thriving capybara community, one hot spring at a time."</em></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Migration Modal -->
        <div id="migration-modal" class="modal hidden">
            <div class="modal-content large">
                <div class="modal-header">
                    <h2>üåç The Great Migration</h2>
                    <button class="modal-close">&times;</button>
                </div>
                <div class="modal-body">
                    <p class="migration-intro">Your capybaras are ready to venture to new wetlands! This will reset your progress but grant permanent Legacy bonuses.</p>
                    
                    <div class="migration-rewards">
                        <h3>Legacy Points Earned</h3>
                        <div id="legacy-breakdown">
                            <!-- Legacy point calculation -->
                        </div>
                        <div class="legacy-total">
                            Total: <span id="legacy-total">0</span> Legacy Points
                        </div>
                    </div>

                    <div class="legacy-upgrades">
                        <h3>Available Upgrades</h3>
                        <div id="legacy-upgrades-list">
                            <!-- Legacy upgrades -->
                        </div>
                    </div>

                    <div class="migration-actions">
                        <button class="btn large" id="btn-cancel-migrate">Stay Here</button>
                        <button class="btn large primary" id="btn-confirm-migrate">Begin Migration</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="js/resources.js"></script>
    <script src="js/buildings.js"></script>
    <script src="js/population.js"></script>
    <script src="js/hotsprings.js"></script>
    <script src="js/seasons.js"></script>
    <script src="js/research.js"></script>
    <script src="js/visitors.js"></script>
    <script src="js/prestige.js"></script>
    <script src="js/save.js"></script>
    <script src="js/ui.js"></script>
    <script src="js/game.js"></script>
</body>
</html>

